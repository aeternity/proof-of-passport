<!doctype html>
<html>
<head>
  <title>Snarkjs client example</title>
</head>
<body>

  <h1>Snarkjs client example</h1>
  <button id="bGenProof"> Create proof </button>

  <!-- JS-generated output will be added here. -->
  <pre class="proof"> Proof: <code id="proof"></code></pre>

  <span id="timing">ms</span>

  <pre class="proof"> Result: <code id="result"></code></pre>


  <script src="snarkjs.min.js">   </script>


  <!-- This is the bundle generated by rollup.js -->
  <script>

const proofComponent = document.getElementById('proof');
const timingComponent = document.getElementById('timing');
const resultComponent = document.getElementById('result');
const bGenProof = document.getElementById("bGenProof");

bGenProof.addEventListener("click", calculateProof);

async function calculateProof() {
    const time = new Date().getTime();

    const { proof, publicSignals } =
      await snarkjs.groth16.fullProve( {"mrz":["97","91","95","31","88","80","60","70","82","65","68","85","80","79","78","84","60","60","65","76","80","72","79","78","83","69","60","72","85","71","85","69","83","60","65","76","66","69","82","84","60","60","60","60","60","60","60","60","60","50","52","72","66","56","49","56","51","50","52","70","82","65","48","52","48","50","49","49","49","77","51","49","49","49","49","49","53","60","60","60","60","60","60","60","60","60","60","60","60","60","60","48","50"],"reveal_bitmap":["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],"dataHashes":["48","130","1","37","2","1","0","48","11","6","9","96","134","72","1","101","3","4","2","1","48","130","1","17","48","37","2","1","1","4","32","176","223","31","133","108","84","158","102","70","11","165","175","196","12","201","130","25","131","46","125","156","194","28","23","55","133","157","164","135","136","220","78","48","37","2","1","2","4","32","190","82","180","235","222","33","79","50","152","136","142","35","116","224","6","242","156","141","128","248","10","61","98","86","248","45","207","210","90","232","175","38","48","37","2","1","3","4","32","0","194","104","108","237","246","97","230","116","198","69","110","26","87","17","89","110","199","108","250","36","21","39","87","110","102","250","213","174","131","171","174","48","37","2","1","11","4","32","136","155","87","144","111","15","152","127","85","25","154","81","20","58","51","75","193","116","234","0","60","30","29","30","183","141","72","247","255","203","100","124","48","37","2","1","12","4","32","41","234","106","78","31","11","114","137","237","17","92","71","134","47","62","78","189","233","201","214","53","4","47","189","201","133","6","121","34","131","64","142","48","37","2","1","13","4","32","91","222","210","193","62","222","104","82","36","41","138","253","70","15","148","208","156","45","105","171","241","195","185","43","217","162","146","201","222","89","238","38","48","37","2","1","14","4","32","76","123","216","13","51","227","72","245","59","193","238","166","103","49","23","164","171","188","194","197","156","187","249","28","198","95","69","15","182","56","54","38"],"eContentBytes":["49","102","48","21","6","9","42","134","72","134","247","13","1","9","3","49","8","6","6","103","129","8","1","1","1","48","28","6","9","42","134","72","134","247","13","1","9","5","49","15","23","13","49","57","49","50","49","54","49","55","50","50","51","56","90","48","47","6","9","42","134","72","134","247","13","1","9","4","49","34","4","32","32","85","108","174","127","112","178","182","8","43","134","123","192","211","131","66","184","240","212","181","240","180","106","195","24","117","54","129","19","10","250","53"],"pubkey":["18378672458823749011","4841444103927811033","3023224800393519793","6326284385199420787","5401729638290777871","12269676610840766206","7667548430139018282","12060135831188564587","4149060726825948636","5641660707552044697","2668232272416994815","17090708072526430768","2656275521090634871","17747936356335704939","15269103175223188285","114005931956941633","2929982889717245115","4774266934406203630","3841001920647474155","354200573583445420","10850518580553202648","12259740385212190135","319314429492374861","11485255630343429312","14248748512902649963","15102090000596254931","8926711271079541901","15789815551465581236","14644527425210366517","5643819695605973219","16054217265698134507","12317190269354451972"],"signature":["11166069965314985877","1069208612558383786","18429730015411243555","5543665581785101435","18208431764604362590","11823014906376912668","10329288939030846112","13523385852884806246","1109460610231840630","17581635307340144925","253111872328858470","9729092634028103624","12367642750681602932","15784197567057740456","14049248585452312872","15433137060239679058","7494674242407923780","6916491994008326168","4783360765813357297","13740560902564265359","14584639252488076709","4360564117030953916","16106245476032876482","1496183849229833033","9477171957494696976","2671602435646300410","1080313201440818666","6707484427577631264","12451583864952443299","9503456725717159840","4758439114649056868","3964782728573651583"],"address":"0x70997970c51812dc3a010c7d01b50e0d17dc79c8"}
,
              "proof_of_passport.wasm",
        "proof_of_passport_final.zkey");

    proofComponent.innerHTML = JSON.stringify(proof, null, 1);
    timingComponent.innerHTML = (new Date().getTime() - time).toString();


    const vkey = await fetch("verification_key.json").then( function(res) {
        return res.json();
    });

    const res = await snarkjs.groth16.verify(vkey, publicSignals, proof);

    resultComponent.innerHTML = res;
}

  </script>

</body>
</html>

